<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aura Social</title>
    <style>
        :root {
            --bg: #000000;
            --card: #16161a;
            --accent: #8e2de2;
            --border: #27272a;
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background: var(--bg); color: white; margin: 0;
            height: 100vh; overflow: hidden;
        }

        /* --- SAYFA YÃ–NETÄ°MÄ° --- */
        .page {
            position: fixed; inset: 0;
            background: var(--bg);
            display: none; /* VarsayÄ±lan gizli */
            flex-direction: column;
            z-index: 10;
            padding-bottom: 90px;
        }
        .page.active { display: flex !important; }

        header {
            padding: 55px 20px 15px;
            font-size: 22px; font-weight: 800;
            border-bottom: 1px solid var(--border);
            background: rgba(0,0,0,0.8); backdrop-filter: blur(15px);
        }

        /* --- MENÃœ VE LÄ°STE --- */
        .menu-list { margin: 20px 15px; background: var(--card); border-radius: 20px; overflow: hidden; }
        .menu-item {
            padding: 18px 20px; display: flex; align-items: center; justify-content: space-between;
            border-bottom: 1px solid var(--border); cursor: pointer;
        }
        .menu-item:active { background: #222; }

        /* --- ALT NAVIGASYON --- */
        nav {
            position: fixed; bottom: 0; width: 100%; height: 85px;
            background: rgba(10,10,10,0.95); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid var(--border); z-index: 1000;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-btn {
            background: none; border: none; color: #555;
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            cursor: pointer; padding: 10px; flex: 1;
        }
        .nav-btn.active { color: white; }

        /* --- SOHBET --- */
        #chat-scroller { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .bubble { max-width: 80%; padding: 12px 16px; border-radius: 20px; font-size: 15px; }
        .me { align-self: flex-end; background: var(--accent); }
        .others { align-self: flex-start; background: #27272a; }

        .input-area { padding: 15px; display: flex; gap: 10px; background: var(--bg); border-top: 1px solid var(--border); }
        input { flex: 1; padding: 12px 18px; border-radius: 25px; border: none; background: #1c1c1e; color: white; outline: none; }
    </style>
</head>
<body>

<div id="p-discover" class="page active"><header>KeÅŸfet</header><div style="padding:40px; text-align:center; color:#555;">KullanÄ±cÄ±lar aranÄ±yor...</div></div>

<div id="p-chat" class="page">
    <header id="chat-title">Mesajlar</header>
    <div id="chat-scroller"></div>
    <div class="input-area">
        <input type="text" id="msg-input" placeholder="Mesaj yazÄ±n...">
        <button onclick="sendMsg()" style="background:white; border:none; width:40px; height:40px; border-radius:50%; font-weight:bold;">â†‘</button>
    </div>
</div>

<div id="p-profile" class="page">
    <header>Ayarlar</header>
    <div style="padding:30px; text-align:center;">
        <div id="avatar" style="width:85px; height:85px; border-radius:30px; background:var(--accent); margin:0 auto 15px; display:flex; align-items:center; justify-content:center; font-size:35px; font-weight:bold; border:2px solid var(--border);">A</div>
        <h2 id="user-name-display" style="margin:0;">KullanÄ±cÄ±</h2>
    </div>

    <div class="menu-list">
        <div class="menu-item" onclick="editName()"><span>ğŸ‘¤ Ä°smi DÃ¼zenle</span><span>â¯</span></div>
        <div class="menu-item" onclick="changeThemeColor()"><span>ğŸ¨ Renk TemasÄ±</span><span>â¯</span></div>
    </div>
    <div class="menu-list">
        <div class="menu-item" onclick="logout()" style="color:#ff3b30;"><span>ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</span></div>
    </div>
</div>

<nav id="footer-nav">
    <div class="nav-btn active" onclick="navigate('discover')"><span>ğŸ”</span><small>KeÅŸfet</small></div>
    <div class="nav-btn" onclick="navigate('chat')"><span>ğŸ’¬</span><small>Sohbet</small></div>
    <div class="nav-btn" onclick="navigate('profile')"><span>ğŸ‘¤</span><small>Profil</small></div>
</nav>

<script>
    let userData = JSON.parse(localStorage.getItem('aura_v7')) || { name: 'KullanÄ±cÄ±', color: '#8e2de2' };

    window.onload = () => {
        applyUserData();
    };

    function applyUserData() {
        document.getElementById('user-name-display').innerText = userData.name;
        document.getElementById('avatar').innerText = userData.name[0].toUpperCase();
        document.getElementById('avatar').style.background = userData.color;
        document.documentElement.style.setProperty('--accent', userData.color);
    }

    // GÃœVENLÄ° NAVÄ°GASYON (Siyah ekranÄ± engelleyen yapÄ±)
    function navigate(pageId) {
        try {
            // 1. TÃ¼m sayfalarÄ± bul ve gizle
            const allPages = document.querySelectorAll('.page');
            allPages.forEach(p => p.classList.remove('active'));

            // 2. Hedef sayfayÄ± bul ve gÃ¶ster
            const targetPage = document.getElementById('p-' + pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            } else {
                // EÄŸer sayfa bulunamazsa varsayÄ±lan olarak keÅŸfeti aÃ§
                document.getElementById('p-discover').classList.add('active');
            }

            // 3. Navigasyon buton renklerini gÃ¼ncelle
            const allBtns = document.querySelectorAll('.nav-btn');
            allBtns.forEach(b => b.classList.remove('active'));
            
            // TÄ±klanan butonu aktif yap (sÄ±ralamaya gÃ¶re)
            const btnIdx = pageId === 'discover' ? 0 : (pageId === 'chat' ? 1 : 2);
            allBtns[btnIdx].classList.add('active');

        } catch (e) {
            console.error("Navigasyon hatasÄ±:", e);
            document.getElementById('p-discover').classList.add('active'); // Hata anÄ±nda kurtarma
        }
    }

    function editName() {
        const n = prompt("Yeni isminiz:", userData.name);
        if (n && n.trim() !== "") {
            userData.name = n.trim();
            saveAndRefresh();
        }
    }

    function changeThemeColor() {
        const colors = ['#8e2de2', '#007aff', '#ff2d55', '#4cd964', '#ff9500'];
        const currentIdx = colors.indexOf(userData.color);
        userData.color = colors[(currentIdx + 1) % colors.length];
        saveAndRefresh();
    }

    function saveAndRefresh() {
        localStorage.setItem('aura_v7', JSON.stringify(userData));
        applyUserData();
    }

    function sendMsg() {
        const i = document.getElementById('msg-input');
        if (!i.value) return;
        const scroller = document.getElementById('chat-scroller');
        const div = document.createElement('div');
        div.className = 'bubble me';
        div.innerText = i.value;
        scroller.appendChild(div);
        i.value = '';
        scroller.scrollTop = scroller.scrollHeight;
    }

    function logout() {
        if(confirm("Ã‡Ä±kÄ±ÅŸ yapÄ±lsÄ±n mÄ±?")) {
            localStorage.clear();
            location.reload();
        }
    }
</script>
</body>
</html>