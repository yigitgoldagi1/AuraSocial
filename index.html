<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aura Hybrid</title>
    <style>
        :root {
            --bg: #000;
            --surface: #121212;
            --accent: #fff;
            --border: rgba(255,255,255,0.12);
            --text-dim: #8e8e8e;
            --whatsapp-green: #25D366;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            background: var(--bg); color: white; margin: 0; height: 100vh; overflow: hidden;
        }

        /* --- SAYFA YAPISI VE GE√áƒ∞≈ûLER --- */
        .page {
            position: absolute; inset: 0; opacity: 0; transform: scale(0.98);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); pointer-events: none;
            display: flex; flex-direction: column; padding-bottom: 90px;
        }
        .page.active { opacity: 1; transform: scale(1); pointer-events: auto; }

        header {
            padding: 60px 25px 20px; font-size: 26px; font-weight: 800;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(30px);
            border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;
        }

        /* --- WHATSAPP STƒ∞Lƒ∞ SOHBET --- */
        #chat-penceresi { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 6px; }
        
        .bubble-container { display: flex; flex-direction: column; width: 100%; margin-bottom: 4px; }
        .bubble-container.me { align-items: flex-end; }
        .bubble-container.others { align-items: flex-start; }

        .bubble {
            max-width: 75%; padding: 10px 14px; border-radius: 18px; font-size: 15px;
            position: relative; box-shadow: 0 1px 2px rgba(0,0,0,0.2);
            animation: bubblePop 0.25s ease-out;
        }
        @keyframes bubblePop { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .me .bubble { background: #373737; color: white; border-bottom-right-radius: 4px; }
        .others .bubble { background: var(--surface); border: 1px solid var(--border); border-bottom-left-radius: 4px; }

        .meta {
            display: flex; align-items: center; gap: 4px; font-size: 10px; 
            margin-top: 4px; color: var(--text-dim); justify-content: flex-end;
        }
        .ticks { color: var(--whatsapp-green); font-weight: bold; }

        /* --- PREMƒ∞UM INPUT --- */
        .input-bar {
            padding: 15px 20px 30px; display: flex; gap: 12px; align-items: center;
            background: var(--bg); border-top: 1px solid var(--border);
        }
        .message-input {
            flex: 1; background: #1c1c1e; border: 1px solid #2c2c2e; padding: 12px 18px;
            border-radius: 25px; color: white; outline: none; font-size: 16px;
        }

        /* --- NAVƒ∞GASYON (GLASSMORPHISM) --- */
        nav {
            position: fixed; bottom: 25px; left: 25px; right: 25px;
            height: 65px; background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(25px); border-radius: 30px;
            border: 1px solid var(--border); display: flex;
            justify-content: space-around; align-items: center; z-index: 1000;
        }
        .nav-item { color: #666; font-size: 22px; transition: 0.3s; }
        .nav-item.active { color: white; transform: translateY(-3px); }

        /* --- AUTH --- */
        #auth-overlay { position: fixed; inset: 0; background: black; z-index: 9999; display: flex; align-items: center; justify-content: center; text-align: center; }
    </style>
</head>
<body>

<div id="auth-overlay">
    <div style="width: 80%;">
        <h1 style="font-size: 3.5rem; letter-spacing: -3px; margin:0;">Aura</h1>
        <p style="color: #555; margin-bottom: 40px; text-transform: uppercase; letter-spacing: 2px; font-size: 10px;">Elite Anonymous Network</p>
        <input type="text" id="reg-name" placeholder="Takma Ad" class="message-input" style="width:100%; margin-bottom:10px; box-sizing:border-box;">
        <input type="email" id="reg-email" placeholder="E-posta" class="message-input" style="width:100%; margin-bottom:20px; box-sizing:border-box;">
        <button onclick="register()" style="width:100%; padding:15px; border-radius:25px; border:none; background:white; font-weight:bold;">KATIL</button>
    </div>
</div>

<div id="page-discover" class="page active"><header>Ke≈üfet</header></div>

<div id="page-chat" class="page">
    <header>Mesajlar <span style="font-size: 14px; color: var(--whatsapp-green);">‚óè Online</span></header>
    <div id="chat-penceresi"></div>
    <div class="input-bar">
        <input type="text" id="msg-input" class="message-input" placeholder="Bir ≈üeyler yazƒ±n...">
        <button onclick="sendMsg()" style="background:white; border:none; width:45px; height:45px; border-radius:50%; font-size:18px;">‚Üë</button>
    </div>
</div>

<div id="page-profile" class="page">
    <header>Profil</header>
    <div style="padding: 40px; text-align: center;">
        <div style="width: 90px; height: 90px; background: #111; border-radius: 30px; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 35px; border: 1.5px solid var(--accent);" id="p-avatar">?</div>
        <h2 id="p-name" style="letter-spacing: -1px;"></h2>
        <p id="p-bio" style="color: #555; font-size: 14px;"></p>
        <button onclick="logout()" style="margin-top: 50px; color: #ff3b30; background: none; border: none; font-weight: bold; font-size: 12px; letter-spacing: 1px;">OTURUMU KAPAT</button>
    </div>
</div>

<nav>
    <div class="nav-item active" onclick="showPage('discover', this)">üîç</div>
    <div class="nav-item" onclick="showPage('chat', this)">üí¨</div>
    <div class="nav-item" onclick="showPage('profile', this)">üë§</div>
</nav>

<script>
    let socket;
    let user = JSON.parse(localStorage.getItem('aura_user'));

    function register() {
        const name = document.getElementById('reg-name').value;
        const email = document.getElementById('reg-email').value;
        if(name && email) {
            localStorage.setItem('aura_user', JSON.stringify({name, email, bio: 'Aura Premium √úyesi'}));
            location.reload();
        }
    }

    if(user) {
        document.getElementById('auth-overlay').style.display = 'none';
        document.getElementById('p-name').innerText = user.name;
        document.getElementById('p-bio').innerText = user.bio;
        document.getElementById('p-avatar').innerText = user.name[0].toUpperCase();
        connect();
    }

    function connect() {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        socket = new WebSocket(protocol + '//' + window.location.host + '/ws/' + user.name);
        socket.onmessage = (e) => {
            const data = JSON.parse(e.data);
            if(data.text) appendMsg(data.user, data.text, data.user === user.name);
        };
    }

    function showPage(pId, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('page-' + pId).classList.add('active');
        el.classList.add('active');
    }

    function sendMsg() {
        const i = document.getElementById('msg-input');
        if(i.value && socket) { socket.send(JSON.stringify({ text: i.value })); i.value = ''; }
    }

    function appendMsg(u, t, m) {
        const chat = document.getElementById('chat-penceresi');
        const now = new Date();
        const time = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
        
        const container = document.createElement('div');
        container.className = `bubble-container ${m ? 'me' : 'others'}`;
        
        container.innerHTML = `
            ${!m ? `<span style="font-size:10px; color:#555; margin-left:8px; margin-bottom:2px;">${u}</span>` : ''}
            <div class="bubble">
                ${t}
                <div class="meta">
                    ${time} ${m ? '<span class="ticks">‚úì‚úì</span>' : ''}
                </div>
            </div>
        `;
        
        chat.appendChild(container);
        chat.scrollTop = chat.scrollHeight;
    }

    function logout() { localStorage.clear(); location.reload(); }
    document.getElementById('msg-input').addEventListener('keypress', (e) => { if(e.key === 'Enter') sendMsg(); });
</script>
</body>
</html>