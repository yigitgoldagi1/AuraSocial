<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aura Social</title>
    <style>
        :root {
            --bg: #000;
            --surface: #121212;
            --accent: #8e2de2; /* Premium Mor */
            --glass: rgba(20, 20, 20, 0.7);
            --border: rgba(255, 255, 255, 0.1);
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            background-color: var(--bg); color: white;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            overflow: hidden;
        }

        /* --- SAYFA Sƒ∞STEMƒ∞ (HATASIZ √áAPA Sƒ∞STEMƒ∞) --- */
        .wrapper {
            display: flex; width: 300%; height: 100vh;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Navigasyon Tetikleyicileri */
        #tab1:checked ~ .wrapper { transform: translateX(0); }
        #tab2:checked ~ .wrapper { transform: translateX(-33.33%); }
        #tab3:checked ~ .wrapper { transform: translateX(-66.66%); }

        section {
            width: 33.33%; height: 100%; display: flex; flex-direction: column;
            overflow-y: auto; padding-top: 60px; padding-bottom: 100px;
            box-sizing: border-box;
        }

        /* --- √úST BAR (GLASSMORPHISM) --- */
        header {
            position: fixed; top: 0; width: 100%; height: 60px;
            background: var(--glass); backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-size: 20px; z-index: 100;
        }

        /* --- KE≈ûFET BALONLARI (WHATSAPP/INSTAGRAM Hƒ∞BRƒ∞T) --- */
        .discover-rail {
            padding: 15px; display: flex; gap: 15px; overflow-x: auto;
            border-bottom: 1px solid var(--border); background: #080808;
            scrollbar-width: none;
        }
        .vibe-circle {
            min-width: 65px; height: 65px; border-radius: 25px;
            background: linear-gradient(135deg, var(--accent), #4a00e0);
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; border: 2px solid var(--bg);
            box-shadow: 0 4px 15px rgba(142, 45, 226, 0.3);
        }

        /* --- SOHBET Lƒ∞STESƒ∞ (WHATSAPP RAHATLIƒûI) --- */
        .chat-item {
            display: flex; align-items: center; padding: 15px 20px;
            border-bottom: 0.5px solid var(--border); transition: 0.2s;
        }
        .chat-item:active { background: #1a1a1a; }
        .chat-avatar {
            width: 50px; height: 50px; border-radius: 18px;
            background: #222; margin-right: 15px;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
        }
        .chat-info { flex: 1; }
        .chat-info h4 { margin: 0; font-size: 16px; }
        .chat-info p { margin: 5px 0 0; font-size: 13px; color: #888; }

        /* --- ALT NAVƒ∞GASYON (SABƒ∞T) --- */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; height: 85px;
            background: var(--glass); backdrop-filter: blur(30px);
            border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; align-items: center;
            padding-bottom: env(safe-area-inset-bottom); z-index: 200;
        }
        .nav-label {
            display: flex; flex-direction: column; align-items: center;
            color: #555; cursor: pointer; transition: 0.3s;
        }
        input[type="radio"] { display: none; }
        #tab1:checked ~ .nav-bar label[for="tab1"],
        #tab2:checked ~ .nav-bar label[for="tab2"],
        #tab3:checked ~ .nav-bar label[for="tab3"] { color: white; transform: translateY(-5px); }

        /* --- Gƒ∞Rƒ∞≈û EKRANI (ƒ∞LK SEFER) --- */
        #login-gate {
            position: fixed; inset: 0; background: #000; z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .input-elite {
            width: 80%; padding: 18px; border-radius: 20px; border: 1px solid var(--border);
            background: #111; color: white; font-size: 16px; margin-bottom: 15px; text-align: center;
        }
    </style>
</head>
<body>

<input type="radio" name="tabs" id="tab1" checked>
<input type="radio" name="tabs" id="tab2">
<input type="radio" name="tabs" id="tab3">

<div id="login-gate">
    <h1 style="font-size: 3rem; letter-spacing: -3px; margin-bottom: 5px;">Aura</h1>
    <p style="color:#555; margin-bottom: 30px; font-size: 12px; letter-spacing: 2px;">HYBRID SOCIAL</p>
    <input type="text" id="my-name-input" class="input-elite" placeholder="Takma Adƒ±n">
    <button onclick="saveUser()" style="width: 80%; padding: 18px; border-radius: 20px; border:none; background:white; font-weight:bold;">BA≈ûLA</button>
</div>

<header id="dynamic-header">Aura</header>

<div class="wrapper">
    <section id="chats">
        <div class="discover-rail" id="discover-circles">
            <div class="vibe-circle">üîç</div>
        </div>
        <div id="active-chats-list">
            <div style="padding: 40px; text-align: center; color: #444;">
                Hen√ºz sohbetin yok.<br>√ústteki balonlardan yeni birilerini ke≈üfet!
            </div>
        </div>
    </section>

    <section id="discover">
        <div style="padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;" id="discover-grid">
            </div>
    </section>

    <section id="profile">
        <div style="padding: 30px; text-align: center;">
            <div id="big-avatar" style="width:100px; height:100px; border-radius:35px; background:var(--accent); margin:0 auto 20px; display:flex; align-items:center; justify-content:center; font-size:40px; font-weight:800;">?</div>
            <h2 id="display-name" style="margin:0;">ƒ∞sim</h2>
            <p style="color: #555;">Elite Aura √úyesi</p>
        </div>
        <div style="margin: 20px; background: var(--surface); border-radius: 20px; overflow: hidden; border: 1px solid var(--border);">
            <div onclick="location.reload()" style="padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between;"><span>Uygulamayƒ± Yenile</span> <span>üîÑ</span></div>
            <div onclick="localStorage.clear(); location.reload();" style="padding: 20px; color: #ff3b30;"><span>Oturumu Kapat</span> <span>‚ûî</span></div>
        </div>
    </section>
</div>

<div class="nav-bar">
    <label for="tab1" class="nav-label"><span style="font-size: 24px;">üí¨</span><small>Sohbet</small></label>
    <label for="tab2" class="nav-label"><span style="font-size: 24px;">üîç</span><small>Ke≈üfet</small></label>
    <label for="tab3" class="nav-label"><span style="font-size: 24px;">üë§</span><small>Profil</small></label>
</div>

<script>
    let ws;
    let user = JSON.parse(localStorage.getItem('aura_hybrid_user'));

    if(user) {
        document.getElementById('login-gate').style.display = 'none';
        document.getElementById('display-name').innerText = user.name;
        document.getElementById('big-avatar').innerText = user.name[0].toUpperCase();
        initSocket();
    }

    function saveUser() {
        const n = document.getElementById('my-name-input').value;
        if(n) {
            localStorage.setItem('aura_hybrid_user', JSON.stringify({name: n}));
            location.reload();
        }
    }

    function initSocket() {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        ws = new WebSocket(protocol + '//' + window.location.host + '/ws/' + user.name);

        ws.onmessage = (e) => {
            const data = JSON.parse(e.data);
            if(data.user !== user.name) {
                addDiscoverEffect(data.user);
            }
        };
    }

    function addDiscoverEffect(u) {
        const rail = document.getElementById('discover-circles');
        const grid = document.getElementById('discover-grid');

        // Balon ekle (WhatsApp Stili)
        if(![...rail.querySelectorAll('span')].some(s => s.innerText === u)) {
            const div = document.createElement('div');
            div.className = 'vibe-circle';
            div.style.minWidth = '65px';
            div.innerText = u[0].toUpperCase();
            rail.appendChild(div);

            // Grid ekle (C2me Stili)
            const card = document.createElement('div');
            card.style = "background:var(--surface); border-radius:25px; padding:30px; text-align:center; border:1px solid var(--border);";
            card.innerHTML = `<div style="font-size:30px; margin-bottom:10px;">${u[0].toUpperCase()}</div><div style="font-weight:bold;">${u}</div>`;
            grid.appendChild(card);
        }
    }
</script>
</body>
</html>