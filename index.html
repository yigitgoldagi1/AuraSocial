<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aura V4 | Elite</title>
    <style>
        :root {
            --bg: #050505;
            --surface: #121212;
            --accent: #ffffff;
            --border: rgba(255,255,255,0.1);
            --ease: cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            background: var(--bg); color: white; margin: 0; height: 100vh; overflow: hidden;
        }

        /* --- SAYFA GE√áƒ∞≈û ANƒ∞MASYONLARI --- */
        .page {
            position: absolute; inset: 0; opacity: 0; transform: translateY(10px);
            transition: all 0.4s var(--ease); pointer-events: none;
            display: flex; flex-direction: column; padding-bottom: 90px;
        }
        .page.active {
            opacity: 1; transform: translateY(0); pointer-events: auto;
        }

        header {
            padding: 60px 25px 20px; font-size: 28px; font-weight: 700;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        /* --- PROFƒ∞L D√úZENLEME ALANI --- */
        .profile-container {
            padding: 30px; display: flex; flex-direction: column; align-items: center;
        }
        .avatar-edit {
            width: 110px; height: 110px; border-radius: 35px;
            background: linear-gradient(135deg, #222, #000);
            border: 2px solid var(--accent); display: flex;
            align-items: center; justify-content: center; font-size: 45px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5); position: relative;
        }
        .edit-badge {
            position: absolute; bottom: -5px; right: -5px;
            background: white; color: black; border-radius: 50%;
            width: 30px; height: 30px; font-size: 15px;
            display: flex; align-items: center; justify-content: center;
        }

        .input-group { width: 100%; margin-top: 25px; }
        .input-group label { font-size: 12px; color: #666; text-transform: uppercase; margin-left: 5px; }
        .p-input {
            width: 100%; background: var(--surface); border: 1px solid var(--border);
            padding: 15px; border-radius: 15px; color: white; margin-top: 8px;
            box-sizing: border-box; font-size: 16px;
        }

        /* --- SOHBET BALONLARI (WHATSAPP PREMIUM) --- */
        .msg {
            max-width: 75%; padding: 14px 18px; border-radius: 22px;
            font-size: 15px; line-height: 1.5; margin: 5px 0;
            animation: msgPop 0.3s var(--ease);
        }
        @keyframes msgPop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* --- NAVƒ∞GASYON (FLOATING GLASS) --- */
        nav {
            position: fixed; bottom: 25px; left: 20px; right: 20px;
            height: 65px; background: rgba(25, 25, 25, 0.8);
            backdrop-filter: blur(25px); border-radius: 25px;
            border: 1px solid var(--border); display: flex;
            justify-content: space-around; align-items: center; z-index: 1000;
        }
        .nav-item { color: #555; transition: 0.3s; padding: 10px 20px; border-radius: 15px; }
        .nav-item.active { color: white; background: rgba(255,255,255,0.05); }

        /* --- KAYIT EKRANI (FULL SCREEN) --- */
        #auth-overlay {
            position: fixed; inset: 0; background: black; z-index: 9999;
            display: flex; align-items: center; justify-content: center;
        }
    </style>
</head>
<body>

<div id="auth-overlay">
    <div style="text-align:center; width: 80%;">
        <h1 style="font-size: 3rem; letter-spacing: -2px;">Aura</h1>
        <input type="text" id="reg-name" placeholder="Adƒ±nƒ±z" class="p-input">
        <input type="email" id="reg-email" placeholder="E-posta" class="p-input">
        <button onclick="register()" style="width:100%; padding:18px; border-radius:15px; border:none; margin-top:15px; font-weight:bold; font-size:16px;">KE≈ûFETMEYE BA≈ûLA</button>
    </div>
</div>

<div id="page-discover" class="page active"><header>Ke≈üfet</header></div>

<div id="page-chat" class="page">
    <header>Mesajlar</header>
    <div id="chat-penceresi" style="flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column;"></div>
    <div style="padding: 20px; display:flex; gap:10px;">
        <input type="text" id="msg-input" class="p-input" placeholder="Mesaj yazƒ±n..." style="margin:0;">
        <button onclick="sendMsg()" style="background:white; border:none; padding:15px; border-radius:15px;">üöÄ</button>
    </div>
</div>

<div id="page-profile" class="page">
    <header>Profil D√ºzenle</header>
    <div class="profile-container">
        <div class="avatar-edit" id="p-avatar">? <div class="edit-badge">‚úé</div></div>
        
        <div class="input-group">
            <label>G√∂r√ºnen ƒ∞sim</label>
            <input type="text" id="edit-name" class="p-input" onchange="updateProfile()">
        </div>
        <div class="input-group">
            <label>Hakkƒ±mda</label>
            <input type="text" id="edit-bio" class="p-input" placeholder="Gizemli bir ruh..." onchange="updateProfile()">
        </div>

        <button onclick="logout()" style="margin-top:40px; color:#ff3b30; background:none; border:none; font-weight:bold;">Oturumu Kapat</button>
    </div>
</div>

<nav>
    <div class="nav-item active" onclick="showPage('discover', this)">üîç</div>
    <div class="nav-item" onclick="showPage('chat', this)">üí¨</div>
    <div class="nav-item" onclick="showPage('profile', this)">üë§</div>
</nav>

<script>
    let user = JSON.parse(localStorage.getItem('aura_user')) || null;

    function register() {
        const name = document.getElementById('reg-name').value;
        const email = document.getElementById('reg-email').value;
        if(name && email) {
            localStorage.setItem('aura_user', JSON.stringify({name, email, bio: ''}));
            location.reload();
        }
    }

    if(user) {
        document.getElementById('auth-overlay').style.display = 'none';
        document.getElementById('edit-name').value = user.name;
        document.getElementById('edit-bio').value = user.bio || '';
        document.getElementById('p-avatar').innerHTML = `${user.name[0].toUpperCase()} <div class="edit-badge">‚úé</div>`;
        connect();
    }

    function showPage(pId, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('page-' + pId).classList.add('active');
        el.classList.add('active');
    }

    function updateProfile() {
        user.name = document.getElementById('edit-name').value;
        user.bio = document.getElementById('edit-bio').value;
        localStorage.setItem('aura_user', JSON.stringify(user));
        document.getElementById('p-avatar').innerHTML = `${user.name[0].toUpperCase()} <div class="edit-badge">‚úé</div>`;
    }

    function connect() {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        socket = new WebSocket(protocol + '//' + window.location.host + '/ws/' + user.name);
        socket.onmessage = (e) => {
            const data = JSON.parse(e.data);
            if(data.text) appendMsg(data.user, data.text, data.user === user.name);
        };
    }

    function sendMsg() {
        const i = document.getElementById('msg-input');
        if(i.value && socket) { socket.send(JSON.stringify({ text: i.value })); i.value = ''; }
    }

    function appendMsg(u, t, m) {
        const chat = document.getElementById('chat-penceresi');
        const d = document.createElement('div');
        d.className = `msg ${m ? 'me' : 'others'}`;
        d.style.background = m ? '#333' : '#1a1a1a';
        d.style.alignSelf = m ? 'flex-end' : 'flex-start';
        d.innerHTML = `${!m ? `<small style="display:block;color:#888;margin-bottom:4px;">${u}</small>` : ''}${t}`;
        chat.appendChild(d);
        chat.scrollTop = chat.scrollHeight;
    }

    function logout() { localStorage.clear(); location.reload(); }
</script>
</body>
</html>