<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aura: The Living Ecosystem</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --aura: #FF8E53; --bg: #000; --text: #fff;
            --card: rgba(255, 255, 255, 0.08); --border: rgba(255, 255, 255, 0.1);
        }
        body.light-mode {
            --bg: #f8f9fa; --text: #1a1a1a; --card: #fff; --border: rgba(0,0,0,0.05);
        }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; overflow: hidden; transition: 0.3s; }

        /* SAYFA Y√ñNETƒ∞Mƒ∞ */
        .view { position: fixed; inset: 0; display: none; padding-bottom: 100px; overflow-y: auto; z-index: 10; }
        .view.active { display: block; animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* POST & VIBE TASARIMI */
        .post { background: var(--card); border-radius: 30px; margin: 15px; padding: 20px; border: 1px solid var(--border); position: relative; }
        .vibe-tag { display: inline-block; padding: 5px 12px; border-radius: 12px; background: var(--aura); color: #fff; font-size: 10px; font-weight: 800; margin-bottom: 10px; text-transform: uppercase; }
        .post-media { width: 100%; border-radius: 20px; margin-top: 15px; max-height: 400px; object-fit: cover; }
        .music-bar { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 8px 12px; display: flex; align-items: center; gap: 10px; margin-top: 10px; font-size: 12px; }

        /* NAVƒ∞GASYON (HER ≈ûEY AKTƒ∞F) */
        nav { position: fixed; bottom: 30px; left: 20px; right: 20px; height: 75px; background: rgba(255,255,255,0.05); backdrop-filter: blur(30px); border-radius: 35px; border: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 20000; }
        .nav-item { font-size: 24px; opacity: 0.3; cursor: pointer; transition: 0.3s; color: var(--text); }
        .nav-item.active { opacity: 1; color: var(--aura); }
        .nav-plus { font-size: 32px; color: var(--aura); filter: drop-shadow(0 0 5px var(--aura)); }

        /* MODALLAR */
        .modal { position: fixed; inset: 0; background: var(--bg); z-index: 30000; display: none; flex-direction: column; padding: 40px 25px; overflow-y: auto; }
        .aura-input { width: 100%; background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 18px; border-radius: 20px; margin-bottom: 15px; font-family: inherit; font-size: 16px; outline: none; }
        .btn-main { background: var(--aura); color: white; border: none; padding: 18px; border-radius: 20px; font-weight: 800; width: 100%; cursor: pointer; }
        
        /* PREVIEW */
        #preview-box { width: 100%; height: 200px; border-radius: 20px; background: var(--card); margin-bottom: 15px; display: none; overflow: hidden; }
        #preview-box img, #preview-box video { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>

    <div id="v-home" class="view active">
        <div style="padding: 60px 20px 20px;">
            <h1 style="font-weight: 800; font-size: 32px; margin: 0;">Aura.</h1>
            <p style="opacity:0.4; font-size:12px; margin-bottom:20px;">Senin frekansƒ±nda neler oluyor?</p>
            <div id="main-feed"></div>
        </div>
    </div>

    <div id="v-chat" class="view">
        <div style="padding: 60px 25px;">
            <h1 style="font-weight: 800;">Fƒ±sƒ±ltƒ±lar</h1>
            <div id="match-list">
                <div style="background:var(--card); padding:20px; border-radius:20px; text-align:center; opacity:0.5;">
                    Benzer auralar aranƒ±yor... <br><small>Bir post payla≈üarak e≈üle≈ümeyi ba≈ülat!</small>
                </div>
            </div>
        </div>
    </div>

    <div id="v-profile" class="view">
        <div style="padding: 60px 25px; text-align:center;">
            <div id="p-avatar" style="width:100px; height:100px; border-radius:35px; background:var(--aura); margin:0 auto 15px; display:flex; align-items:center; justify-content:center; font-size:35px; font-weight:800; color:#fff;">A</div>
            <h2 id="p-name" style="margin:0;">Aura Sakini</h2>
            <p id="p-bio" style="opacity:0.5; font-size:14px; margin:10px 0;">Modunu buraya yansƒ±t...</p>
            <div style="display:flex; justify-content:center; gap:25px; margin:20px 0;">
                <div><b id="count-post">0</b><br><small style="opacity:0.4">Payla≈üƒ±m</small></div>
                <div><b>432</b><br><small style="opacity:0.4">Enerji</small></div>
            </div>
            <button class="btn-main" onclick="openModal('edit-modal')" style="width:auto; padding:10px 30px; font-size:14px;">D√ºzenle</button>
        </div>
        <div id="p-feed"></div>
    </div>

    <div id="v-settings" class="view">
        <div style="padding: 60px 25px;">
            <h1 style="font-weight: 800;">Ayarlar</h1>
            <div style="background:var(--card); border-radius:20px; padding:10px; border:1px solid var(--border);">
                <div style="padding:15px; display:flex; justify-content:space-between; align-items:center;" onclick="toggleTheme()">
                    <b>G√ºnd√ºz / Gece</b> <span id="t-icon">üåô</span>
                </div>
                <div style="padding:15px; border-top:1px solid var(--border);" onclick="copyLink()">
                    <b>Profil Linki</b> <small style="opacity:0.4">Kopyala</small>
                </div>
                <div style="padding:15px; border-top:1px solid var(--border);">
                    <b>Bildirimler</b> <small style="color:var(--aura)">A√ßƒ±k</small>
                </div>
            </div>
        </div>
    </div>

    <div id="share-modal" class="modal">
        <h2 style="font-weight:800;">Payla≈ü</h2>
        <div id="preview-box"></div>
        <textarea id="in-text" class="aura-input" rows="4" placeholder="Neler oluyor?"></textarea>
        <div style="display:flex; gap:10px; margin-bottom:15px;">
            <select id="in-mood" class="aura-input" style="margin:0; flex:1;">
                <option value="Huzurlu">Huzurlu üçÉ</option>
                <option value="Enerjik">Enerjik üî•</option>
                <option value="H√ºz√ºnl√º">H√ºz√ºnl√º üåßÔ∏è</option>
                <option value="Yorgun">Yorgun ‚òï</option>
            </select>
            <input type="text" id="in-music" class="aura-input" style="margin:0; flex:1;" placeholder="M√ºzik (√ñrn: Lofi)">
        </div>
        <input type="file" id="in-file" style="display:none" onchange="previewMedia(this)">
        <button class="btn-main" style="background:#222; margin-bottom:10px;" onclick="document.getElementById('in-file').click()">üì∏ Medya Ekle</button>
        <button class="btn-main" onclick="publish()">Yayƒ±nla</button>
        <button onclick="closeModal('share-modal')" style="background:none; border:none; color:gray; width:100%; margin-top:20px;">Vazge√ß</button>
    </div>

    <div id="edit-modal" class="modal">
        <h2 style="font-weight:800;">Profili G√ºncelle</h2>
        <input type="text" id="ed-name" class="aura-input" placeholder="ƒ∞sim">
        <textarea id="ed-bio" class="aura-input" placeholder="Biyografi"></textarea>
        <button class="btn-main" onclick="saveProfile()">Kaydet</button>
        <button onclick="closeModal('edit-modal')" style="background:none; border:none; color:gray; width:100%; margin-top:20px;">Vazge√ß</button>
    </div>

    <nav>
        <div class="nav-item active" onclick="nav('home', this)">üè†</div>
        <div class="nav-item">üß≠</div>
        <div class="nav-plus" onclick="openModal('share-modal')">‚äï</div>
        <div class="nav-item" onclick="nav('chat', this)">üí¨</div>
        <div class="nav-item" onclick="nav('profile', this)">üë§</div>
        <div class="nav-item" onclick="nav('settings', this)">‚öôÔ∏è</div>
    </nav>

    <script>
        let posts = JSON.parse(localStorage.getItem('aura_v11_posts')) || [];
        let user = JSON.parse(localStorage.getItem('aura_v11_user')) || {name: "Aura Sakini", bio: "Modunu buraya yansƒ±t..."};
        let tempMedia = null;

        function nav(id, el) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const target = document.getElementById('v-' + id);
            if(target) target.classList.add('active');
            if(el) el.classList.add('active');
            render();
        }

        function previewMedia(input) {
            const file = input.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = e => {
                tempMedia = {data: e.target.result, type: file.type};
                const box = document.getElementById('preview-box');
                box.style.display = 'block';
                box.innerHTML = file.type.includes('video') ? `<video src="${e.target.result}" autoplay muted loop></video>` : `<img src="${e.target.result}">`;
            };
            reader.readAsDataURL(file);
        }

        function publish() {
            const txt = document.getElementById('in-text').value;
            const mood = document.getElementById('in-mood').value;
            const music = document.getElementById('in-music').value || "Sessizliƒüin Sesi";
            if(!txt && !tempMedia) return;

            posts.unshift({txt, mood, music, media: tempMedia, user: user.name, date: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})});
            localStorage.setItem('aura_v11_posts', JSON.stringify(posts));
            
            // RESET & REDIRECT
            document.getElementById('in-text').value = '';
            document.getElementById('preview-box').style.display = 'none';
            tempMedia = null;
            closeModal('share-modal');
            nav('home', document.querySelector('.nav-item'));
            checkMatches();
        }

        function render() {
            const feedHtml = posts.map(p => `
                <div class="post">
                    <div class="vibe-tag">${p.mood}</div>
                    <div style="display:flex; gap:12px; align-items:center; margin-bottom:12px;">
                        <div style="width:35px; height:35px; border-radius:12px; background:var(--aura); display:flex; align-items:center; justify-content:center; font-weight:800; color:white;">${p.user[0]}</div>
                        <b>${p.user} <small style="opacity:0.3; font-weight:400;">‚Ä¢ ${p.date}</small></b>
                    </div>
                    <div style="font-size:15px; line-height:1.6;">${p.txt}</div>
                    ${p.media ? (p.media.type.includes('video') ? `<video src="${p.media.data}" class="post-media" controls autoplay muted loop></video>` : `<img src="${p.media.data}" class="post-media">`) : ''}
                    <div class="music-bar">üéµ ${p.music}</div>
                </div>
            `).join('');
            document.getElementById('main-feed').innerHTML = feedHtml || '<div style="text-align:center; padding:100px; opacity:0.2;">Hen√ºz kimse fƒ±sƒ±ldamadƒ±...</div>';
            document.getElementById('p-feed').innerHTML = feedHtml;
            document.getElementById('count-post').innerText = posts.length;
        }

        function checkMatches() {
            if(posts.length > 0) {
                document.getElementById('match-list').innerHTML = `
                    <div class="post" style="border: 2px solid var(--aura); animation: pulse 2s infinite;">
                        <div style="text-align:center;">
                            <b style="color:var(--aura);">YENƒ∞ E≈ûLE≈ûME!</b>
                            <p style="font-size:13px;">${posts[0].mood} modunda olan 2 ki≈üi daha var.</p>
                            <button class="btn-main" style="padding:10px; font-size:12px;" onclick="alert('√ñzel oda a√ßƒ±lƒ±yor...')">Sohbete Gir</button>
                        </div>
                    </div>
                `;
            }
        }

        function saveProfile() {
            user.name = document.getElementById('ed-name').value || user.name;
            user.bio = document.getElementById('ed-bio').value || user.bio;
            localStorage.setItem('aura_v11_user', JSON.stringify(user));
            document.getElementById('p-name').innerText = user.name;
            document.getElementById('p-bio').innerText = user.bio;
            document.getElementById('p-avatar').innerText = user.name[0];
            closeModal('edit-modal');
        }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            document.getElementById('t-icon').innerText = document.body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô';
        }

        function copyLink() { alert("Profil linkin panoya kopyalandƒ±!"); }
        function openModal(id) { 
            document.getElementById(id).style.display = 'flex'; 
            if(id === 'edit-modal') {
                document.getElementById('ed-name').value = user.name;
                document.getElementById('ed-bio').value = user.bio;
            }
        }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        // START
        document.getElementById('p-name').innerText = user.name;
        document.getElementById('p-bio').innerText = user.bio;
        document.getElementById('p-avatar').innerText = user.name[0];
        render();
    </script>
</body>
</html>