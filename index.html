<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aura Social</title>
    <style>
        :root {
            --bg: #000000;
            --surface: #121212;
            --accent: #8e2de2;
            --text: #ffffff;
            --border: rgba(255,255,255,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
            background-color: var(--bg); color: var(--text); margin: 0; height: 100vh; overflow: hidden;
        }

        /* --- SAYFA YAPISI --- */
        .page {
            position: absolute; inset: 0; opacity: 0; transform: translateY(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); pointer-events: none;
            display: flex; flex-direction: column; padding-bottom: 90px;
        }
        .page.active { opacity: 1; transform: translateY(0); pointer-events: auto; }

        header {
            padding: 60px 20px 15px; display: flex; justify-content: space-between; align-items: center;
            font-size: 22px; font-weight: 800; border-bottom: 1px solid var(--border);
        }

        /* --- PROFƒ∞L VE AYARLAR KOMBO --- */
        .profile-header {
            padding: 30px 20px; text-align: center;
            background: linear-gradient(to bottom, #121212, #000);
        }
        .profile-pic {
            width: 90px; height: 90px; border-radius: 32px; background: var(--accent);
            margin: 0 auto 15px; display: flex; align-items: center; justify-content: center;
            font-size: 32px; font-weight: bold; border: 3px solid #1a1a1a;
        }
        
        .stats-bar {
            display: flex; justify-content: center; gap: 40px; margin-bottom: 25px;
        }
        .stat-item { text-align: center; }
        .stat-val { display: block; font-weight: bold; font-size: 18px; }
        .stat-lbl { font-size: 12px; color: #888; }

        /* --- Lƒ∞STE STƒ∞Lƒ∞ AYARLAR (iOS/WhatsApp Tarzƒ±) --- */
        .settings-group {
            margin: 0 15px 20px; background: var(--surface); border-radius: 20px; overflow: hidden;
        }
        .setting-row {
            padding: 16px 20px; display: flex; align-items: center; gap: 15px;
            border-bottom: 1px solid var(--border); cursor: pointer; transition: 0.2s;
        }
        .setting-row:last-child { border-bottom: none; }
        .setting-row:active { background: #222; }
        .icon-box { width: 32px; height: 32px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; }

        /* --- NAVƒ∞GASYON --- */
        nav {
            position: fixed; bottom: 0; width: 100%; height: 85px;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(25px);
            border-top: 1px solid var(--border); display: flex; justify-content: space-around;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-item { color: #555; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 5px; }
        .nav-item.active { color: white; }

        /* --- Gƒ∞Rƒ∞≈û --- */
        #auth-view { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .input-box { width: 80%; padding: 16px; background: #1a1a1a; border: 1px solid #333; border-radius: 16px; color: white; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="auth-view">
    <h1 style="font-size: 3rem; letter-spacing: -2px;">Aura</h1>
    <input type="text" id="in-name" class="input-box" placeholder="Kullanƒ±cƒ± Adƒ±">
    <button onclick="login()" style="width:80%; padding:16px; border-radius:16px; border:none; background:white; font-weight:bold;">Giri≈ü Yap</button>
</div>

<div id="p-discover" class="page active">
    <header>Ke≈üfet</header>
    <div id="user-list" style="padding:20px; display:grid; grid-template-columns:1fr 1fr; gap:15px;"></div>
</div>

<div id="p-chat" class="page">
    <header id="chat-title">Sohbet</header>
    <div id="chat-box" style="flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:10px;"></div>
    <div style="padding:15px; display:flex; gap:10px; background:#000;">
        <input type="text" id="m-input" style="flex:1; padding:12px; background:#1a1a1a; color:white; border-radius:20px; border:none;" placeholder="Mesaj...">
        <button onclick="send()" style="padding:0 20px; background:white; border-radius:20px; border:none;">‚Üë</button>
    </div>
</div>

<div id="p-profile" class="page" style="overflow-y: auto;">
    <header>Profil</header>
    <div class="profile-header">
        <div class="profile-pic" id="p-avatar">?</div>
        <h2 id="p-name" style="margin: 0 0 5px 0;">ƒ∞sim</h2>
        <p style="color:#888; font-size:14px; margin-bottom:20px;">@premium_user</p>
        
        <div class="stats-bar">
            <div class="stat-item"><span class="stat-val">12</span><span class="stat-lbl">Sohbet</span></div>
            <div class="stat-item"><span class="stat-val">450</span><span class="stat-lbl">Puan</span></div>
            <div class="stat-item"><span class="stat-val">Elite</span><span class="stat-lbl">√úyelik</span></div>
        </div>
    </div>

    <div class="settings-group">
        <div class="setting-row">
            <div class="icon-box" style="background:#007aff;">üë§</div>
            <div style="flex:1;">Profil D√ºzenle</div>
            <div style="color:#444;">‚ùØ</div>
        </div>
        <div class="setting-row">
            <div class="icon-box" style="background:#4cd964;">üîî</div>
            <div style="flex:1;">Bildirimler</div>
            <div style="color:#444;">‚ùØ</div>
        </div>
        <div class="setting-row">
            <div class="icon-box" style="background:#ff9500;">üîí</div>
            <div style="flex:1;">Gizlilik ve G√ºvenlik</div>
            <div style="color:#444;">‚ùØ</div>
        </div>
    </div>

    <div class="settings-group">
        <div class="setting-row" onclick="logout()" style="color:#ff3b30;">
            <div class="icon-box" style="background:rgba(255,59,48,0.1);">üö™</div>
            <div style="flex:1;">√áƒ±kƒ±≈ü Yap</div>
        </div>
    </div>
</div>

<nav>
    <div class="nav-item active" onclick="tab('discover', 0)"><span>üîç</span><small>Ke≈üfet</small></div>
    <div class="nav-item" onclick="tab('chat', 1)"><span>üí¨</span><small>Sohbet</small></div>
    <div class="nav-item" onclick="tab('profile', 2)"><span>üë§</span><small>Profil</small></div>
</nav>

<script>
    let ws;
    let target = null;
    let user = JSON.parse(localStorage.getItem('aura_pro'));

    if(user) {
        document.getElementById('auth-view').style.display = 'none';
        document.getElementById('p-name').innerText = user.name;
        document.getElementById('p-avatar').innerText = user.name[0].toUpperCase();
        startWS();
    }

    function login() {
        let n = document.getElementById('in-name').value;
        if(n) {
            localStorage.setItem('aura_pro', JSON.stringify({name: n}));
            location.reload();
        }
    }

    function startWS() {
        let p = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        ws = new WebSocket(p + '//' + window.location.host + '/ws/' + user.name);
        ws.onmessage = (e) => {
            let d = JSON.parse(e.data);
            if(d.text && (!d.hedef || d.hedef === user.name || d.user === user.name)) {
                let b = document.getElementById('chat-box');
                let div = document.createElement('div');
                div.style.alignSelf = d.user === user.name ? 'flex-end' : 'flex-start';
                div.style.background = d.user === user.name ? '#8e2de2' : '#222';
                div.style.padding = '10px 15px';
                div.style.borderRadius = '15px';
                div.style.maxWidth = '75%';
                div.innerHTML = `<small style="display:block; font-size:10px; opacity:0.6;">${d.user}</small>${d.text}`;
                b.appendChild(div);
                b.scrollTop = b.scrollHeight;
            }
            updateList(d.user);
        };
    }

    function tab(id, idx) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('p-' + id).classList.add('active');
        document.querySelectorAll('.nav-item')[idx].classList.add('active');
    }

    function send() {
        let i = document.getElementById('m-input');
        if(i.value && ws) {
            ws.send(JSON.stringify({text: i.value, hedef: target}));
            i.value = '';
        }
    }

    function updateList(u) {
        if(u === user.name) return;
        let l = document.getElementById('user-list');
        if([...l.querySelectorAll('h4')].some(h => h.innerText === u)) return;
        let c = document.createElement('div');
        c.className = 'setting-row'; 
        c.style.background = '#121212'; c.style.borderRadius = '15px';
        c.onclick = () => { target = u; document.getElementById('chat-title').innerText = u; tab('chat', 1); };
        c.innerHTML = `<div class="icon-box" style="background:#333;">${u[0]}</div><h4>${u}</h4>`;
        l.appendChild(c);
    }

    function logout() { localStorage.clear(); location.reload(); }
</script>
</body>
</html>